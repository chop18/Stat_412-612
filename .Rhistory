knitr::opts_chunk$set(echo = TRUE)
library(COVID19)
library(tidyverse)
library(readr)
covid19("US", level= 2) %>%
head()
covid19("US", level= 2) %>%
head() %>%
rename(state_name= administrative_area_level_2 )
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )
covid19("US", level= 2) %>%
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" ))
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" ))
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
head()
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
relocate(state_name, date, confirmed, test, recovered)
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
relocate(state_name, date, confirmed, test, recovered) %>%
head()
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
relocate(state_name, date, confirmed, tests, recovered) %>%
head()
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
relocate(state_name, date, confirmed, tests, recovered)-> easy_covid_df
easy_covid_df %>%
arrange(date, administrative_area_level_2) %>%
relocate(administrative_area_level_2, .before = id)
#Create a new data frame easier to use
covid19("US", level= 2) %>%
rename(state_name= administrative_area_level_2 ) %>%
select(-c("administrative_area_level_3","currency","administrative_area_level_1", "latitude", "longitude" )) %>%
relocate(state_name, date, confirmed, tests, recovered)-> easy_covid_df
easy_covid_df %>%
arrange(date, administrative_area_level_2) %>%
relocate(administrative_area_level_2, .before = id)
easy_covid_df %>%
head()
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date, stay_home_restrictions) %>%
head()
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date, stay_home_restrictions) %>%
head()
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
head()
covid19("US", level = 2) %>%
group_by(administrative_area_level_2, stay_home_restrictions) %>%
mutate(first_date = min(date)) %>%
select(administrative_area_level_2, date, first_date, stay_home_restrictions) %>%
distinct(first_date) %>%
filter(!is.na(stay_home_restrictions)&!stay_home_restrictions==0) %>%
arrange(first_date) %>%
group_by(first_date) %>%
mutate(count=n()) %>%
separate(first_date,
c("Year", "Month", "Day")) %>%
arrange(Month, Day) %>%
distinct(administrative_area_level_2, .keep_all=TRUE)->first_date
first_date %>%
arrange(administrative_area_level_2)
covid19("US", level = 2) %>%
group_by(administrative_area_level_2, confirmed) %>%
mutate(first_date = min(date)) %>%
group_by(administrative_area_level_2) %>%
slice_min(confirmed) %>%
select(administrative_area_level_2, date, first_date, confirmed) %>%
distinct(administrative_area_level_2) %>%
arrange(administrative_area_level_2)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
head()
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
head()
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0) %>%  #First day that stay at home restrictions was imposed arranged by date.
group_by(first_date) %>%
mutate(numer_of_sates_declared_restr= n())
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0) %>%  #First day that stay at home restrictions was imposed arranged by date.
group_by(first_date) %>%
mutate(numer_of_sates_declared_restr= n())
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0) %>%  #First day that stay at home restrictions was imposed arranged by date.
group_by(first_date0) %>%
mutate(numer_of_sates_declared_restr= n())
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0) %>%  #First day that stay at home restrictions was imposed arranged by date.
group_by(first_date0) %>%
mutate(sates_declared_restr_same_day= n()) %>% separate(first_date0,
c("Year", "Month", "Day")) %>%
arrange(Month, Day) %>%
distinct(state_name, .keep_all=TRUE)-> first_date_of_restrictions_df
first_date_of_restrictions_df %>%
head()
first_date_of_restrictions_df %>%
head(n=52)
easy_covid_df %>%
group_by(state_name, stay_home_restrictions) %>%
mutate(first_date0 = min(date)) %>%
select(state_name, date, first_date0, stay_home_restrictions) %>%
distinct(first_date0) %>%
filter(!is.na(stay_home_restrictions)&(!stay_home_restrictions==0)) %>%
arrange(first_date0) %>%  #First day that stay at home restrictions was imposed arranged by date.
group_by(first_date0) %>%
mutate(sates_declared_restr_same_day= n()) %>% separate(first_date0,
c("Year", "Month", "Day")) %>%
arrange(Month, Day) %>%
distinct(state_name, .keep_all=TRUE)-> first_date_of_sh_restrictions_df
